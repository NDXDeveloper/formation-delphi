üîù Retour au [Sommaire](/SOMMAIRE.md)

# 4.3.1 Contr√¥les d'affichage (Labels, Images)

## Introduction

Les contr√¥les d'affichage sont des composants essentiels dans toute interface utilisateur. Contrairement aux contr√¥les de saisie o√π l'utilisateur entre des informations, les **contr√¥les d'affichage** servent principalement √† **montrer des informations** √† l'utilisateur. Ils ne sont g√©n√©ralement pas interactifs, mais jouent un r√¥le crucial dans la clart√© et l'esth√©tique de votre application.

Dans cette section, nous allons explorer les deux contr√¥les d'affichage les plus couramment utilis√©s :
- **TLabel** : pour afficher du texte
- **TImage** : pour afficher des images

## Le composant TLabel (√âtiquette)

### Qu'est-ce qu'un TLabel ?

Le composant **TLabel** (√©tiquette) est probablement le composant le plus simple et le plus utilis√© de la VCL. Il sert √† afficher du **texte statique** sur votre formulaire.

**Utilisations courantes :**
- Afficher des titres et sous-titres
- √âtiqueter d'autres contr√¥les (comme les zones de texte)
- Afficher des instructions √† l'utilisateur
- Montrer des informations dynamiques (r√©sultats de calculs, statuts, etc.)
- Cr√©er des l√©gendes
- Afficher des messages informatifs

### O√π trouver TLabel ?

Dans la palette de composants de Delphi, TLabel se trouve dans l'onglet **Standard**. Son ic√¥ne ressemble √† un petit "A" repr√©sentant du texte.

### Propri√©t√©s essentielles de TLabel

#### 1. Caption - Le texte affich√©

C'est la propri√©t√© la plus importante : elle contient le **texte qui sera affich√©**.

```pascal
Label1.Caption := 'Bienvenue dans mon application !';
```

**Points √† noter :**
- Le texte peut √™tre modifi√© √† tout moment, m√™me pendant l'ex√©cution
- Par d√©faut, la Caption est le nom du composant (Label1, Label2, etc.)
- Pensez √† changer cette valeur d√®s la conception pour quelque chose de significatif

#### 2. Font - La police de caract√®res

La propri√©t√© **Font** contr√¥le l'apparence du texte. Elle comprend plusieurs sous-propri√©t√©s :

**Font.Name** : Le nom de la police (Arial, Tahoma, Segoe UI, etc.)
```pascal
Label1.Font.Name := 'Arial';
```

**Font.Size** : La taille de la police en points
```pascal
Label1.Font.Size := 14;
```

**Font.Style** : Le style du texte (gras, italique, soulign√©, barr√©)
```pascal
Label1.Font.Style := [fsBold];           // Gras
Label1.Font.Style := [fsItalic];         // Italique
Label1.Font.Style := [fsBold, fsItalic]; // Gras et italique
Label1.Font.Style := [fsUnderline];      // Soulign√©
Label1.Font.Style := [fsStrikeOut];      // Barr√©
```

**Font.Color** : La couleur du texte
```pascal
Label1.Font.Color := clRed;     // Rouge
Label1.Font.Color := clBlue;    // Bleu
Label1.Font.Color := clBlack;   // Noir
```

#### 3. Alignment - L'alignement du texte

D√©termine comment le texte est align√© dans le contr√¥le :

```pascal
Label1.Alignment := taLeftJustify;   // Align√© √† gauche (par d√©faut)
Label1.Alignment := taRightJustify;  // Align√© √† droite
Label1.Alignment := taCenter;        // Centr√©
```

#### 4. AutoSize - Ajustement automatique de la taille

Si **AutoSize** est √† `True`, le label s'ajuste automatiquement √† la taille du texte.
Si c'est `False`, vous contr√¥lez manuellement la taille du label.

```pascal
Label1.AutoSize := True;  // Taille automatique (recommand√©)
Label1.AutoSize := False; // Taille manuelle
```

**Conseil :** Laissez g√©n√©ralement AutoSize √† True, sauf si vous avez besoin d'un contr√¥le pr√©cis de la taille.

#### 5. WordWrap - Retour √† la ligne automatique

Si le texte est trop long, **WordWrap** permet de le faire passer √† la ligne suivante.

```pascal
Label1.WordWrap := True;  // Active le retour √† la ligne
Label1.AutoSize := False; // N√©cessaire pour que WordWrap fonctionne
Label1.Width := 200;      // D√©finir une largeur
```

**Important :** Pour que WordWrap fonctionne, AutoSize doit √™tre √† False et vous devez d√©finir une largeur.

#### 6. Layout - Position verticale du texte

Contr√¥le la position verticale du texte dans le label (utile quand AutoSize est False) :

```pascal
Label1.Layout := tlTop;    // En haut
Label1.Layout := tlCenter; // Au centre
Label1.Layout := tlBottom; // En bas
```

#### 7. Transparent - Transparence de l'arri√®re-plan

D√©termine si l'arri√®re-plan du label est transparent ou opaque :

```pascal
Label1.Transparent := True;  // Transparent (par d√©faut)
Label1.Transparent := False; // Opaque
```

**Note :** Avec Transparent √† True, vous verrez la couleur du formulaire derri√®re le texte.

#### 8. Color - Couleur de fond

Si Transparent est False, vous pouvez d√©finir une couleur de fond :

```pascal
Label1.Transparent := False;
Label1.Color := clYellow; // Fond jaune
```

#### 9. ShowAccelChar - Caract√®res d'acc√©l√©ration

Permet de cr√©er des raccourcis clavier en utilisant le caract√®re '&' :

```pascal
Label1.Caption := '&Nom :';  // Le 'N' sera soulign√©
Label1.ShowAccelChar := True;
```

Avec ShowAccelChar √† True, Alt+N d√©placera le focus vers le contr√¥le suivant.

#### 10. FocusControl - Contr√¥le associ√©

D√©finit quel contr√¥le re√ßoit le focus quand l'utilisateur clique sur le label :

```pascal
// Dans l'Inspecteur d'objets, s√©lectionnez Edit1 pour FocusControl
// Maintenant, cliquer sur Label1 donnera le focus √† Edit1
```

C'est tr√®s utile pour les √©tiquettes de zones de saisie.

### Utilisation pratique de TLabel

#### Exemple 1 : Titre d'application

```pascal
procedure TForm1.FormCreate(Sender: TObject);
begin
  lblTitre.Caption := 'Gestionnaire de Contacts';
  lblTitre.Font.Size := 18;
  lblTitre.Font.Style := [fsBold];
  lblTitre.Font.Color := clNavy;
  lblTitre.Alignment := taCenter;
end;
```

#### Exemple 2 : √âtiquette pour un champ de saisie

```pascal
// Configuration au moment de la conception via l'Inspecteur d'objets
// ou par code :
procedure TForm1.FormCreate(Sender: TObject);
begin
  lblNom.Caption := '&Nom complet :';
  lblNom.FocusControl := EditNom;
end;
```

#### Exemple 3 : Affichage d'informations dynamiques

```pascal
procedure TForm1.BoutonCalculerClick(Sender: TObject);
var
  Total: Double;
begin
  Total := StrToFloat(Edit1.Text) * StrToFloat(Edit2.Text);
  lblResultat.Caption := Format('Total : %.2f ‚Ç¨', [Total]);
  lblResultat.Font.Color := clGreen;
  lblResultat.Font.Style := [fsBold];
end;
```

#### Exemple 4 : Message d'information avec retour √† la ligne

```pascal
procedure TForm1.FormCreate(Sender: TObject);
begin
  lblInfo.Caption := 'Veuillez remplir tous les champs obligatoires ' +
                     'avant de continuer. Les champs marqu√©s d''un ' +
                     'ast√©risque (*) sont obligatoires.';
  lblInfo.WordWrap := True;
  lblInfo.AutoSize := False;
  lblInfo.Width := 300;
  lblInfo.Font.Color := clMaroon;
end;
```

### Astuces et bonnes pratiques pour TLabel

#### 1. Nommage coh√©rent

Utilisez un pr√©fixe coh√©rent pour vos labels, par exemple :
- `lbl` pour label : `lblNom`, `lblPrenom`, `lblTotal`
- Ou un nom descriptif : `TitreApplication`, `InfoUtilisateur`

#### 2. Texte clair et concis

R√©digez des textes courts et compr√©hensibles. √âvitez le jargon technique quand c'est possible.

**Bon :** "Nom :"
**Mauvais :** "Veuillez entrer votre patronyme dans le champ ci-contre :"

#### 3. Coh√©rence visuelle

Utilisez les m√™mes polices et couleurs pour les labels similaires dans toute votre application.

#### 4. Contraste suffisant

Assurez-vous que le texte est lisible avec un bon contraste entre la couleur du texte et celle du fond.

**Bon :** Texte noir sur fond blanc
**Mauvais :** Texte gris clair sur fond blanc

#### 5. Taille appropri√©e

Ne rendez pas le texte trop petit (difficile √† lire) ni trop grand (prend trop de place).

**Recommandations :**
- Texte normal : 8-10 points
- Titres : 12-16 points
- Titre principal : 18-24 points

#### 6. Utilisation des raccourcis clavier

Pour les labels associ√©s √† des champs de saisie, utilisez le caract√®re '&' pour cr√©er des raccourcis :

```pascal
lblNom.Caption := '&Nom :';        // Alt+N
lblPrenom.Caption := '&Pr√©nom :';  // Alt+P
lblEmail.Caption := '&Email :';    // Alt+E
```

## Le composant TImage (Image)

### Qu'est-ce qu'un TImage ?

Le composant **TImage** permet d'afficher des **images** sur votre formulaire. C'est le moyen standard d'incorporer des graphiques, logos, ic√¥nes, photos, ou tout autre contenu visuel dans votre application.

**Utilisations courantes :**
- Afficher le logo de l'entreprise
- Montrer des photos ou illustrations
- Cr√©er des interfaces graphiques riches
- Afficher des graphiques ou diagrammes
- Cr√©er des boutons personnalis√©s avec images
- Montrer des aper√ßus d'images
- Cr√©er des galeries d'images

### O√π trouver TImage ?

TImage se trouve dans l'onglet **Additional** de la palette de composants.

### Propri√©t√©s essentielles de TImage

#### 1. Picture - L'image √† afficher

C'est la propri√©t√© principale qui contient l'image. Vous pouvez :

**Charger une image au moment de la conception :**
1. S√©lectionnez le composant TImage
2. Dans l'Inspecteur d'objets, cliquez sur Picture
3. Cliquez sur le bouton [...] qui appara√Æt
4. Cliquez sur "Load" et s√©lectionnez votre image

**Charger une image par code :**

```pascal
// Charger depuis un fichier
Image1.Picture.LoadFromFile('C:\Images\logo.png');

// Charger depuis une ressource
Image1.Picture.LoadFromFile(ExtractFilePath(Application.ExeName) + 'logo.png');

// Effacer l'image
Image1.Picture := nil;
```

**Formats support√©s :**
- BMP (Bitmap)
- JPG/JPEG (Joint Photographic Experts Group)
- PNG (Portable Network Graphics) - avec transparence
- ICO (Ic√¥ne Windows)
- WMF/EMF (Windows Metafile)
- GIF (Graphics Interchange Format)

#### 2. Stretch - √âtirer l'image

D√©termine si l'image doit √™tre √©tir√©e pour remplir tout le composant :

```pascal
Image1.Stretch := False; // Taille originale (par d√©faut)
Image1.Stretch := True;  // √âtire l'image pour remplir le composant
```

**Attention :** Si Stretch est True et que Proportional est False, l'image peut √™tre d√©form√©e.

#### 3. Proportional - Proportions conserv√©es

Si True, l'image conserve ses proportions originales quand elle est redimensionn√©e :

```pascal
Image1.Stretch := True;
Image1.Proportional := True; // Conserve les proportions
```

**Recommandation :** Utilisez toujours Proportional = True avec Stretch = True pour √©viter les d√©formations.

#### 4. Center - Centrer l'image

Si True, l'image est centr√©e dans le composant (utile quand Stretch est False) :

```pascal
Image1.Center := True;
Image1.Stretch := False;
```

#### 5. Transparent - Transparence

Rend l'image transparente (si le format le supporte, comme PNG) :

```pascal
Image1.Transparent := True;
```

**Note :** La transparence fonctionne particuli√®rement bien avec les images PNG qui ont un canal alpha.

#### 6. AutoSize - Ajustement automatique

Si True, le composant TImage s'ajuste automatiquement √† la taille de l'image :

```pascal
Image1.AutoSize := True;
```

**Usage typique :**
- AutoSize = True : Pour les logos ou ic√¥nes de taille fixe
- AutoSize = False avec Stretch = True : Pour les images qui doivent s'adapter √† l'espace disponible

### Utilisation pratique de TImage

#### Exemple 1 : Afficher un logo d'entreprise

```pascal
procedure TForm1.FormCreate(Sender: TObject);
begin
  imgLogo.Picture.LoadFromFile('logo.png');
  imgLogo.Stretch := True;
  imgLogo.Proportional := True;
  imgLogo.Transparent := True;
  imgLogo.Width := 200;
  imgLogo.Height := 100;
end;
```

#### Exemple 2 : Galerie d'images simple

```pascal
procedure TForm1.ListBox1Click(Sender: TObject);
var
  CheminImage: string;
begin
  if ListBox1.ItemIndex >= 0 then
  begin
    CheminImage := 'Images\' + ListBox1.Items[ListBox1.ItemIndex] + '.jpg';
    if FileExists(CheminImage) then
    begin
      imgPreview.Picture.LoadFromFile(CheminImage);
      imgPreview.Stretch := True;
      imgPreview.Proportional := True;
    end;
  end;
end;
```

#### Exemple 3 : Charger une image depuis un dialogue

```pascal
procedure TForm1.btnChargerImageClick(Sender: TObject);
begin
  if OpenPictureDialog1.Execute then
  begin
    try
      imgPhoto.Picture.LoadFromFile(OpenPictureDialog1.FileName);
      imgPhoto.Stretch := True;
      imgPhoto.Proportional := True;
    except
      on E: Exception do
        ShowMessage('Erreur lors du chargement de l''image : ' + E.Message);
    end;
  end;
end;
```

#### Exemple 4 : Cr√©er un bouton graphique

```pascal
procedure TForm1.imgBoutonMouseEnter(Sender: TObject);
begin
  // Changer l'image au survol
  imgBouton.Picture.LoadFromFile('bouton_hover.png');
  imgBouton.Cursor := crHandPoint;
end;

procedure TForm1.imgBoutonMouseLeave(Sender: TObject);
begin
  // Revenir √† l'image normale
  imgBouton.Picture.LoadFromFile('bouton_normal.png');
end;

procedure TForm1.imgBoutonClick(Sender: TObject);
begin
  // Action au clic
  ShowMessage('Bouton cliqu√© !');
end;
```

#### Exemple 5 : Afficher une image conditionnellement

```pascal
procedure TForm1.MettreAJourStatut(EnLigne: Boolean);
begin
  if EnLigne then
  begin
    imgStatut.Picture.LoadFromFile('icone_vert.png');
    lblStatut.Caption := 'Connect√©';
    lblStatut.Font.Color := clGreen;
  end
  else
  begin
    imgStatut.Picture.LoadFromFile('icone_rouge.png');
    lblStatut.Caption := 'D√©connect√©';
    lblStatut.Font.Color := clRed;
  end;
end;
```

### Manipulation avanc√©e des images

#### Obtenir des informations sur l'image

```pascal
procedure TForm1.AfficherInfoImage;
begin
  if Assigned(Image1.Picture.Graphic) then
  begin
    ShowMessage(Format('Largeur : %d pixels' + sLineBreak +
                       'Hauteur : %d pixels',
                       [Image1.Picture.Width, Image1.Picture.Height]));
  end;
end;
```

#### V√©rifier si une image est charg√©e

```pascal
if Assigned(Image1.Picture.Graphic) and (Image1.Picture.Width > 0) then
begin
  // Une image est charg√©e
end
else
begin
  // Pas d'image
end;
```

#### Sauvegarder une image

```pascal
procedure TForm1.SauvegarderImage;
begin
  if SavePictureDialog1.Execute then
  begin
    Image1.Picture.SaveToFile(SavePictureDialog1.FileName);
  end;
end;
```

### Astuces et bonnes pratiques pour TImage

#### 1. Optimisation de la taille des images

N'utilisez pas d'images trop grandes. Si votre composant TImage fait 100x100 pixels, inutile d'utiliser une image de 2000x2000 pixels.

**Recommandation :** Redimensionnez vos images √† la taille approximative d'affichage avant de les incorporer.

#### 2. Format d'image appropri√©

- **PNG** : Id√©al pour les logos, ic√¥nes, images avec transparence
- **JPG** : Id√©al pour les photos (bon compromis taille/qualit√©)
- **BMP** : √Ä √©viter (fichiers tr√®s volumineux)

#### 3. Gestion des erreurs

Toujours encadrer le chargement d'images dans un bloc try-except :

```pascal
try
  Image1.Picture.LoadFromFile(CheminFichier);
except
  on E: Exception do
    ShowMessage('Impossible de charger l''image');
end;
```

#### 4. V√©rification d'existence de fichier

Avant de charger, v√©rifiez que le fichier existe :

```pascal
if FileExists(CheminImage) then
  Image1.Picture.LoadFromFile(CheminImage)
else
  ShowMessage('Fichier introuvable : ' + CheminImage);
```

#### 5. Lib√©ration de la m√©moire

Pour lib√©rer la m√©moire occup√©e par une image :

```pascal
Image1.Picture := nil;
// ou
Image1.Picture.Assign(nil);
```

#### 6. Chemins relatifs

Utilisez des chemins relatifs pour la portabilit√© :

```pascal
var
  CheminApp: string;
begin
  CheminApp := ExtractFilePath(Application.ExeName);
  Image1.Picture.LoadFromFile(CheminApp + 'Images\logo.png');
end;
```

#### 7. Images et ressources

Pour les images qui font partie int√©grante de votre application, envisagez de les incorporer comme ressources plut√¥t que de les charger depuis des fichiers externes.

## Combinaison de TLabel et TImage

Les labels et images sont souvent utilis√©s ensemble pour cr√©er des interfaces riches. Voici quelques exemples :

### Exemple 1 : Panneau d'information avec ic√¥ne

```pascal
procedure TForm1.AfficherMessage(const Message: string; TypeMsg: Integer);
begin
  lblMessage.Caption := Message;

  case TypeMsg of
    0: // Information
      begin
        imgIcone.Picture.LoadFromFile('info.png');
        lblMessage.Font.Color := clBlue;
      end;
    1: // Avertissement
      begin
        imgIcone.Picture.LoadFromFile('warning.png');
        lblMessage.Font.Color := clMaroon;
      end;
    2: // Erreur
      begin
        imgIcone.Picture.LoadFromFile('error.png');
        lblMessage.Font.Color := clRed;
      end;
  end;
end;
```

### Exemple 2 : Carte de profil utilisateur

```pascal
procedure TForm1.AfficherProfil(const Nom, Prenom, Email: string;
                                const CheminPhoto: string);
begin
  // Charger la photo
  if FileExists(CheminPhoto) then
    imgPhoto.Picture.LoadFromFile(CheminPhoto)
  else
    imgPhoto.Picture.LoadFromFile('avatar_defaut.png');

  imgPhoto.Stretch := True;
  imgPhoto.Proportional := True;

  // Afficher les informations
  lblNom.Caption := Nom + ' ' + Prenom;
  lblNom.Font.Size := 14;
  lblNom.Font.Style := [fsBold];

  lblEmail.Caption := Email;
  lblEmail.Font.Color := clGray;
end;
```

## √âv√©nements utiles

Bien que les contr√¥les d'affichage soient principalement statiques, ils peuvent r√©agir √† certains √©v√©nements :

### Pour TLabel

**OnClick** : D√©clench√© quand l'utilisateur clique sur le label

```pascal
procedure TForm1.lblLienClick(Sender: TObject);
begin
  // Simuler un lien cliquable
  ShellExecute(0, 'open', 'https://www.exemple.com', nil, nil, SW_SHOW);
end;
```

**OnMouseEnter / OnMouseLeave** : Simuler un effet de survol

```pascal
procedure TForm1.lblLienMouseEnter(Sender: TObject);
begin
  lblLien.Font.Color := clBlue;
  lblLien.Font.Style := [fsUnderline];
  lblLien.Cursor := crHandPoint;
end;

procedure TForm1.lblLienMouseLeave(Sender: TObject);
begin
  lblLien.Font.Color := clWindowText;
  lblLien.Font.Style := [];
  lblLien.Cursor := crDefault;
end;
```

### Pour TImage

**OnClick** : D√©clench√© quand l'utilisateur clique sur l'image

```pascal
procedure TForm1.imgProductClick(Sender: TObject);
begin
  // Afficher les d√©tails du produit
  ShowProductDetails;
end;
```

**OnDblClick** : Double-clic sur l'image

```pascal
procedure TForm1.imgPhotoDblClick(Sender: TObject);
begin
  // Agrandir l'image en plein √©cran
  AfficherPleinEcran;
end;
```

## Accessibilit√© et bonnes pratiques g√©n√©rales

### Pour TLabel

1. **Texte significatif** : Utilisez des textes clairs et descriptifs
2. **Taille lisible** : Minimum 8 points pour le texte normal
3. **Contraste** : Assurez un bon contraste pour la lisibilit√©
4. **Raccourcis** : Utilisez '&' pour cr√©er des raccourcis clavier coh√©rents

### Pour TImage

1. **Images pertinentes** : N'utilisez des images que quand elles apportent de la valeur
2. **Qualit√©** : Utilisez des images de bonne qualit√©, pas pixelis√©es
3. **Taille appropri√©e** : Dimensionnez correctement vos images
4. **Alternatives textuelles** : Pensez √† accompagner vos images de labels explicatifs

## Conclusion

Les contr√¥les d'affichage **TLabel** et **TImage** sont des composants fondamentaux de toute application Delphi. Bien qu'ils soient simples en apparence, ils offrent de nombreuses possibilit√©s pour cr√©er des interfaces claires, informatives et esth√©tiques.

**Points cl√©s √† retenir :**

**TLabel :**
- Utilis√© pour afficher du texte
- Hautement personnalisable (police, couleur, alignement)
- Peut √™tre dynamique (changement de texte en cours d'ex√©cution)
- Utile pour √©tiqueter d'autres contr√¥les avec FocusControl

**TImage :**
- Utilis√© pour afficher des images de diff√©rents formats
- Propri√©t√©s Stretch et Proportional pour le redimensionnement
- Peut charger des images depuis des fichiers ou des ressources
- Utile pour cr√©er des interfaces visuellement riches

En combinant intelligemment ces deux composants avec d'autres contr√¥les VCL, vous pouvez cr√©er des interfaces utilisateur professionnelles, intuitives et esth√©tiquement plaisantes.

Dans la section suivante, nous explorerons les contr√¥les de saisie, qui permettent √† l'utilisateur d'entrer des informations dans votre application.

‚è≠Ô∏è [Contr√¥les de saisie (Edit, Memo, ComboBox)](/04-conception-dinterfaces-utilisateur-avec-la-vcl/03.2-controles-de-saisie.md)
