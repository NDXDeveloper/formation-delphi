üîù Retour au [Sommaire](/SOMMAIRE.md)

# 18.5 Versionnement et gestion de code source

## Introduction

Imaginez que vous √©crivez un roman. Vous cr√©ez des chapitres, puis vous d√©cidez de tout r√©√©crire diff√©remment. Quelques jours plus tard, vous regrettez : l'ancienne version √©tait meilleure ! Mais vous l'avez √©cras√©e... elle est perdue √† jamais.

Ou pire : vous travaillez sur un document avec trois coll√®gues. Chacun fait ses modifications de son c√¥t√©. Comment fusionner tout √ßa sans perdre le travail de personne ? Comment savoir qui a modifi√© quoi et quand ?

Le **versionnement** (ou gestion de versions) r√©sout ces probl√®mes en conservant **l'historique complet** de votre code : chaque modification, chaque version, avec la possibilit√© de revenir en arri√®re √† tout moment.

### Qu'est-ce que le versionnement ?

Le versionnement est un syst√®me qui enregistre les changements apport√©s √† vos fichiers au fil du temps. C'est comme une **machine √† remonter le temps** pour votre code.

**Sans versionnement :**
```
MonProjet/
  - MonFichier.pas
  - MonFichier_v2.pas
  - MonFichier_v2_final.pas
  - MonFichier_v2_final_VRAI.pas
  - MonFichier_v2_final_VRAI_jeudi.pas
```

**Avec versionnement :**
```
MonProjet/
  - MonFichier.pas  (avec tout l'historique accessible)
```

### Pourquoi utiliser le versionnement ?

#### 1. Historique complet

Vous pouvez voir :
- Qui a modifi√© quoi
- Quand
- Pourquoi (gr√¢ce aux messages de commit)
- Revenir √† n'importe quelle version ant√©rieure

#### 2. Collaboration facilit√©e

Plusieurs d√©veloppeurs peuvent travailler sur le m√™me projet simultan√©ment sans s'√©craser mutuellement le travail.

#### 3. Branches et exp√©rimentation

Vous pouvez cr√©er des "branches" pour tester de nouvelles fonctionnalit√©s sans affecter le code principal. Si √ßa ne marche pas, vous supprimez la branche. Si √ßa marche, vous la fusionnez.

#### 4. Sauvegarde et s√©curit√©

Votre code est sauvegard√© sur des serveurs distants. Si votre ordinateur tombe en panne, rien n'est perdu.

#### 5. Travail offline puis synchronisation

Vous pouvez travailler sans connexion Internet, puis synchroniser vos modifications plus tard.

## Git : Le standard actuel

**Git** est le syst√®me de gestion de versions le plus utilis√© au monde. Il a √©t√© cr√©√© par Linus Torvalds (le cr√©ateur de Linux) en 2005.

### Pourquoi Git ?

- **Gratuit et open source**
- **D√©centralis√©** : Chaque d√©veloppeur a une copie compl√®te de l'historique
- **Rapide et l√©ger**
- **Branching puissant** : Cr√©er et fusionner des branches est facile
- **Standard de l'industrie** : Utilis√© par la majorit√© des projets

### Les concepts fondamentaux de Git

Avant de commencer, comprenons quelques concepts cl√©s :

#### Repository (D√©p√¥t)

Un **repository** (ou "repo") est un dossier contenant votre projet et tout son historique. C'est comme une base de donn√©es qui stocke toutes les versions de vos fichiers.

Il existe deux types :
- **Repository local** : Sur votre machine
- **Repository distant** : Sur un serveur (GitHub, GitLab, etc.)

#### Commit

Un **commit** est un instantan√© (snapshot) de votre projet √† un moment donn√©. C'est comme prendre une photo de tous vos fichiers.

Chaque commit contient :
- Les modifications apport√©es
- Un message d√©crivant les changements
- L'auteur et la date
- Un identifiant unique (hash)

```
Commit 1: "Cr√©ation du projet"
   ‚Üì
Commit 2: "Ajout du formulaire principal"
   ‚Üì
Commit 3: "Connexion √† la base de donn√©es"
   ‚Üì
Commit 4: "Correction bug affichage"
```

#### Working Directory, Staging Area, Repository

Git a trois zones importantes :

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Working Directory  ‚îÇ  ‚Üê Vos fichiers de travail
‚îÇ   (Modifications)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ git add
           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Staging Area      ‚îÇ  ‚Üê Zone de pr√©paration
‚îÇ    (Index)          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ git commit
           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    Repository       ‚îÇ  ‚Üê Historique permanent
‚îÇ   (.git folder)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

1. **Working Directory** : Vos fichiers actuels que vous modifiez
2. **Staging Area** : Zone o√π vous pr√©parez les modifications avant de les enregistrer
3. **Repository** : L'historique complet de votre projet

#### Branch (Branche)

Une **branch** est une ligne de d√©veloppement ind√©pendante. C'est comme cr√©er une copie parall√®le de votre projet pour travailler sur une fonctionnalit√© sans affecter le code principal.

```
       main (branche principale)
         ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ    ‚îÇ    ‚îÇ    ‚îÇ    ‚îÇ
    C1   C2   C3   C4   C5
              ‚îÇ
              ‚îî‚îÄ‚îÄ‚îÄ feature/nouvelle-fonction
                   ‚îÇ
                   C6 ‚îÄ‚îÄ C7
```

## Installation et configuration de Git

### Installation

**Windows :**
1. T√©l√©chargez Git depuis https://git-scm.com/download/win
2. Ex√©cutez l'installateur
3. Acceptez les options par d√©faut (ou personnalisez selon vos pr√©f√©rences)

**V√©rification de l'installation :**

Ouvrez un terminal (CMD ou PowerShell) et tapez :
```bash
git --version
```

Vous devriez voir quelque chose comme : `git version 2.43.0`

### Configuration initiale

Avant d'utiliser Git, configurez votre identit√© :

```bash
# Votre nom (sera visible dans les commits)
git config --global user.name "Votre Nom"

# Votre email
git config --global user.email "votre.email@example.com"

# √âditeur par d√©faut (optionnel)
git config --global core.editor "notepad"

# Fin de ligne (recommand√© pour Windows)
git config --global core.autocrlf true
```

**V√©rifier votre configuration :**
```bash
git config --list
```

### Interface graphique ou ligne de commande ?

Vous avez deux options pour utiliser Git :

#### 1. Ligne de commande (Terminal)

**Avantages :**
- ‚úÖ Contr√¥le total
- ‚úÖ Fonctionne partout
- ‚úÖ Compr√©hension profonde

**Inconv√©nients :**
- ‚ùå Courbe d'apprentissage
- ‚ùå Moins visuel

#### 2. Interface graphique (GUI)

**Outils populaires :**
- **GitKraken** : Moderne et visuellement attrayant
- **SourceTree** : Gratuit et complet
- **GitHub Desktop** : Simple et int√©gr√© √† GitHub
- **TortoiseGit** : Int√©gr√© √† l'explorateur Windows
- **Git Extensions** : Int√©gration avec Visual Studio/Delphi

**Avantages :**
- ‚úÖ Visuel et intuitif
- ‚úÖ Facile pour les d√©butants
- ‚úÖ Vue graphique des branches

**Inconv√©nients :**
- ‚ùå Moins de contr√¥le
- ‚ùå Peut cacher des d√©tails importants

**Recommandation :** Commencez par une GUI pour comprendre les concepts, puis apprenez progressivement la ligne de commande pour plus de puissance.

## Cr√©er votre premier repository

### Initialiser un nouveau projet

Cr√©ons un repository pour un projet Delphi existant.

**Via la ligne de commande :**

```bash
# 1. Naviguez vers votre dossier projet
cd C:\MesProjets\MonAppliDelphi

# 2. Initialisez Git
git init

# 3. V√©rifiez le statut
git status
```

Le dossier `.git` est cr√©√©. C'est l√† que Git stocke tout l'historique.

**Via GitHub Desktop :**
1. File ‚Üí Add Local Repository
2. S√©lectionnez votre dossier
3. Cliquez sur "Create Repository"

### Le fichier .gitignore

**IMPORTANT** : Avant votre premier commit, cr√©ez un fichier `.gitignore` pour exclure les fichiers g√©n√©r√©s.

Cr√©ez un fichier nomm√© `.gitignore` √† la racine de votre projet :

```gitignore
# Fichiers compil√©s Delphi
*.dcu
*.exe
*.dll
*.bpl
*.dcp
*.so
*.apk
*.drc
*.map
*.dres
*.rsm
*.tds
*.dcu
*.lib
*.a
*.o
*.ocx

# Dossiers de compilation
__history/
__recovery/
Win32/
Win64/
Win64/
OSX32/
OSX64/
iOSDevice/
iOSDevice32/
iOSDevice64/
iOSSimulator/
Android/
Android64/
Linux64/

# Fichiers de sauvegarde
*.~pas
*.~dfm
*.~dpr
*.~dpk
*.~dsk
*.~ddp
*.bak
*.*~

# Fichiers locaux
*.local
*.identcache
*.projdata
*.tvsconfig
*.stat
*.dsk
Desktop.ini

# Fichiers de configuration locaux
config.local.ini
config.prod.ini
*.local.json

# Logs et donn√©es temporaires
*.log
*.tmp
temp/
logs/

# IDE
.vs/
.vscode/
*.suo
*.user

# Fichiers syst√®me
.DS_Store
Thumbs.db
```

**Pourquoi .gitignore ?**

- ‚ùå Les `.exe` et `.dcu` sont g√©n√©r√©s √† la compilation, inutile de les versionner
- ‚ùå Les dossiers `Win32/`, `Win64/` contiennent des fichiers temporaires
- ‚ùå Les fichiers de config locaux peuvent contenir des mots de passe
- ‚úÖ Seul le code source doit √™tre versionn√©

### Premier commit

Maintenant que `.gitignore` est en place, faisons notre premier commit :

```bash
# 1. Ajouter tous les fichiers
git add .

# 2. V√©rifier ce qui sera commit√©
git status

# 3. Cr√©er le commit
git commit -m "Initial commit - Cr√©ation du projet"
```

**Explication :**
- `git add .` : Ajoute tous les fichiers (sauf ceux dans .gitignore) √† la staging area
- `git commit -m "message"` : Cr√©e un commit avec un message descriptif

**Via GitHub Desktop :**
1. Tous les fichiers modifi√©s apparaissent dans la liste
2. Entrez un message de commit en bas √† gauche
3. Cliquez sur "Commit to main"

### Voir l'historique

```bash
# Afficher l'historique des commits
git log

# Version plus compacte
git log --oneline

# Avec un graphique des branches
git log --oneline --graph --all
```

**R√©sultat :**
```
3f8a2b1 (HEAD -> main) Initial commit - Cr√©ation du projet
```

## Workflow Git de base

Voici le cycle de travail typique avec Git :

### 1. Modifier des fichiers

Vous travaillez normalement sur votre code dans Delphi.

```pascal
// Vous modifiez MainForm.pas
procedure TFormMain.ButtonClickClick(Sender: TObject);
begin
  ShowMessage('Hello Git!');
end;
```

### 2. V√©rifier l'√©tat

```bash
git status
```

**R√©sultat :**
```
On branch main
Changes not staged for commit:
  modified:   Source/MainForm.pas
```

### 3. Voir les modifications

```bash
# Voir les modifications en d√©tail
git diff

# Voir les modifications d'un fichier sp√©cifique
git diff Source/MainForm.pas
```

**R√©sultat :**
```diff
diff --git a/Source/MainForm.pas b/Source/MainForm.pas
index 1234567..abcdefg 100644
--- a/Source/MainForm.pas
+++ b/Source/MainForm.pas
@@ -45,7 +45,7 @@ procedure TFormMain.ButtonClickClick(Sender: TObject);
 begin
-  ShowMessage('Hello');
+  ShowMessage('Hello Git!');
 end;
```

### 4. Ajouter √† la staging area

```bash
# Ajouter un fichier sp√©cifique
git add Source/MainForm.pas

# Ou ajouter tous les fichiers modifi√©s
git add .

# Ajouter seulement certains types de fichiers
git add *.pas
```

### 5. Cr√©er un commit

```bash
git commit -m "Ajout du message dans le bouton"
```

**Messages de commit :**

‚úÖ **Bons messages :**
- "Ajout de la fonctionnalit√© de connexion"
- "Correction bug d'affichage dans la grille"
- "Refactoring de la classe TClient"
- "Mise √† jour de la base de donn√©es MySQL"

‚ùå **Mauvais messages :**
- "update"
- "fix"
- "modifs"
- "√ßa marche"

**Convention pour les messages :**
```bash
# Format recommand√©
git commit -m "Type: Description courte

Description d√©taill√©e si n√©cessaire
- Point 1
- Point 2"
```

**Types courants :**
- `feat:` Nouvelle fonctionnalit√©
- `fix:` Correction de bug
- `refactor:` Refactoring du code
- `docs:` Documentation
- `style:` Formatage, point-virgules, etc.
- `test:` Ajout de tests
- `chore:` T√¢ches diverses

**Exemples :**
```bash
git commit -m "feat: Ajout du formulaire de connexion"
git commit -m "fix: Correction du bug d'affichage des dates"
git commit -m "refactor: S√©paration UI et logique m√©tier"
```

### 6. Cycle continu

R√©p√©tez ce cycle : modifier ‚Üí v√©rifier ‚Üí ajouter ‚Üí commiter.

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  1. Modifier les fichiers       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  2. git status / git diff       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  3. git add                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  4. git commit -m "message"     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚Üì
         Recommencer
```

## Les branches

Les branches sont l'une des fonctionnalit√©s les plus puissantes de Git.

### Qu'est-ce qu'une branche ?

Une branche est une ligne de d√©veloppement ind√©pendante. Par d√©faut, vous √™tes sur la branche `main` (anciennement `master`).

**Cas d'usage :**
- D√©velopper une nouvelle fonctionnalit√© sans affecter le code principal
- Corriger un bug urgent
- Exp√©rimenter une nouvelle approche

### Cr√©er une branche

```bash
# Cr√©er une nouvelle branche
git branch feature/ajout-client

# Lister les branches
git branch

# Changer de branche
git checkout feature/ajout-client

# Cr√©er ET changer de branche en une commande
git checkout -b feature/ajout-client
```

**R√©sultat :**
```
* feature/ajout-client
  main
```

L'√©toile (*) indique votre branche actuelle.

### Travailler sur une branche

Une fois sur votre branche, travaillez normalement :

```bash
# Modifier des fichiers
# ...

# Commiter
git add .
git commit -m "feat: Ajout du formulaire client"

git add .
git commit -m "feat: Validation des champs client"
```

Ces commits sont **uniquement** sur la branche `feature/ajout-client`. La branche `main` n'est pas affect√©e.

### Visualiser les branches

```bash
# Voir l'historique avec branches
git log --oneline --graph --all
```

**R√©sultat :**
```
* 7b8c9d2 (feature/ajout-client) feat: Validation des champs client
* 4e5f6a7 feat: Ajout du formulaire client
| * 2c3d4e5 (main) fix: Correction bug grille
|/
* 1a2b3c4 Initial commit
```

### Fusionner une branche (Merge)

Quand votre fonctionnalit√© est termin√©e, fusionnez-la dans `main` :

```bash
# 1. Retourner sur main
git checkout main

# 2. Fusionner la branche feature
git merge feature/ajout-client

# 3. Supprimer la branche (optionnel)
git branch -d feature/ajout-client
```

**R√©sultat :**
```
Updating 1a2b3c4..7b8c9d2
Fast-forward
 Source/ClientForm.pas | 150 ++++++++++++++++++++++++++
 Source/ClientForm.dfm | 85 +++++++++++++++
 2 files changed, 235 insertions(+)
```

### Strat√©gies de branching

#### Git Flow (pour projets structur√©s)

```
main
  ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ develop (branche de d√©veloppement)
  ‚îÇ      ‚îÇ
  ‚îÇ      ‚îú‚îÄ‚îÄ‚îÄ feature/fonction-1
  ‚îÇ      ‚îú‚îÄ‚îÄ‚îÄ feature/fonction-2
  ‚îÇ      ‚îî‚îÄ‚îÄ‚îÄ feature/fonction-3
  ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ release/v1.0 (pr√©paration release)
  ‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ hotfix/bug-urgent (corrections urgentes)
```

#### GitHub Flow (plus simple)

```
main
  ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ feature/nouvelle-fonction
  ‚îú‚îÄ‚îÄ‚îÄ fix/correction-bug
  ‚îî‚îÄ‚îÄ‚îÄ refactor/amelioration
```

**Pour d√©buter, utilisez GitHub Flow :**
1. `main` est toujours stable et d√©ployable
2. Cr√©ez une branche pour chaque fonctionnalit√©/correction
3. Fusionnez dans `main` quand termin√©

### R√©solution de conflits

Un **conflit** se produit quand deux personnes modifient la m√™me ligne de code.

**Exemple de conflit :**

```pascal
<<<<<<< HEAD
ShowMessage('Version principale');
=======
ShowMessage('Version de la branche');
>>>>>>> feature/modification
```

**R√©soudre le conflit :**

1. Ouvrez le fichier
2. Choisissez quelle version garder (ou combinez-les)
3. Supprimez les marqueurs `<<<<<<<`, `=======`, `>>>>>>>`
4. Sauvegardez le fichier

```pascal
// Apr√®s r√©solution
ShowMessage('Version finale combin√©e');
```

5. Marquez comme r√©solu et commitez :

```bash
git add Source/MainForm.pas
git commit -m "R√©solution du conflit dans MainForm"
```

**Dans une GUI :**
- Les outils comme GitKraken ou SourceTree ont des interfaces visuelles pour r√©soudre les conflits
- Plus facile pour les d√©butants

## Travail avec un repository distant

Jusqu'ici, nous avons travaill√© en local. Pour collaborer et sauvegarder sur le cloud, utilisons un repository distant.

### Plateformes populaires

**GitHub** (https://github.com)
- Le plus populaire
- Gratuit pour les projets publics et priv√©s
- Excellente int√©gration avec les outils

**GitLab** (https://gitlab.com)
- Alternative compl√®te √† GitHub
- CI/CD int√©gr√©
- Peut √™tre auto-h√©berg√©

**Bitbucket** (https://bitbucket.org)
- De la soci√©t√© Atlassian
- Int√©gr√© avec Jira

### Cr√©er un repository sur GitHub

1. Connectez-vous √† GitHub
2. Cliquez sur "New repository"
3. Nommez votre repository (ex: "MonAppliDelphi")
4. Choisissez Public ou Private
5. N'initialisez PAS avec README (vous avez d√©j√† un projet local)
6. Cliquez sur "Create repository"

GitHub vous donne les commandes √† ex√©cuter :

```bash
# Ajouter le remote
git remote add origin https://github.com/votre-nom/MonAppliDelphi.git

# Pousser votre code
git push -u origin main
```

### Commandes remote

#### Clone (Cloner un repository)

Pour t√©l√©charger un projet existant :

```bash
git clone https://github.com/utilisateur/projet.git
```

Cela cr√©e un dossier avec tout le code et l'historique.

#### Push (Pousser vos modifications)

Pour envoyer vos commits locaux vers GitHub :

```bash
# Pousser la branche actuelle
git push

# Pousser une branche sp√©cifique
git push origin feature/ma-branche

# Premi√®re fois (d√©finir le upstream)
git push -u origin main
```

#### Pull (R√©cup√©rer les modifications)

Pour t√©l√©charger les modifications des autres :

```bash
# R√©cup√©rer et fusionner
git pull

# √âquivalent √†:
git fetch  # T√©l√©charger
git merge  # Fusionner
```

#### Fetch (T√©l√©charger sans fusionner)

```bash
# T√©l√©charger les modifications sans les appliquer
git fetch

# Voir les diff√©rences
git diff origin/main

# Fusionner manuellement si d√©sir√©
git merge origin/main
```

### Workflow de collaboration

**Sc√©nario typique :**

1. **Cloner le projet**
```bash
git clone https://github.com/equipe/projet.git
cd projet
```

2. **Cr√©er une branche pour votre fonctionnalit√©**
```bash
git checkout -b feature/ma-fonctionnalite
```

3. **Travailler et commiter**
```bash
# Modifications...
git add .
git commit -m "feat: Ajout de ma fonctionnalit√©"
```

4. **R√©cup√©rer les derni√®res modifications**
```bash
git checkout main
git pull
git checkout feature/ma-fonctionnalite
git merge main  # Fusionner les derni√®res modifs dans votre branche
```

5. **Pousser votre branche**
```bash
git push -u origin feature/ma-fonctionnalite
```

6. **Cr√©er une Pull Request sur GitHub**
   - Allez sur GitHub
   - Cliquez sur "Compare & pull request"
   - D√©crivez vos modifications
   - Demandez une revue de code

7. **Apr√®s approbation, fusionner**
   - Cliquez sur "Merge pull request"
   - Supprimez la branche (optionnel)

8. **Nettoyer localement**
```bash
git checkout main
git pull
git branch -d feature/ma-fonctionnalite
```

## Commandes Git essentielles

Voici un r√©capitulatif des commandes les plus utilis√©es :

### Configuration

```bash
git config --global user.name "Nom"
git config --global user.email "email@example.com"
git config --list
```

### Cr√©er et cloner

```bash
git init                           # Cr√©er un nouveau repo
git clone <url>                    # Cloner un repo existant
```

### Changements locaux

```bash
git status                         # √âtat des fichiers
git diff                          # Voir les modifications
git add <fichier>                 # Ajouter un fichier
git add .                         # Ajouter tous les fichiers
git commit -m "message"           # Cr√©er un commit
git commit -am "message"          # Ajouter et commiter en une commande
```

### Historique

```bash
git log                           # Historique complet
git log --oneline                 # Historique compact
git log --oneline --graph --all   # Avec graphique des branches
git show <commit>                 # D√©tails d'un commit
```

### Branches

```bash
git branch                        # Lister les branches
git branch <nom>                  # Cr√©er une branche
git checkout <branche>            # Changer de branche
git checkout -b <branche>         # Cr√©er et changer de branche
git merge <branche>               # Fusionner une branche
git branch -d <branche>           # Supprimer une branche
```

### Remote (distant)

```bash
git remote add origin <url>       # Ajouter un remote
git remote -v                     # Voir les remotes
git push                          # Pousser les commits
git push -u origin <branche>      # Pousser et d√©finir upstream
git pull                          # R√©cup√©rer et fusionner
git fetch                         # R√©cup√©rer sans fusionner
```

### Annuler des changements

```bash
git checkout -- <fichier>         # Annuler les modifs d'un fichier
git reset HEAD <fichier>          # Retirer de la staging area
git reset --soft HEAD~1           # Annuler le dernier commit (garde les changements)
git reset --hard HEAD~1           # Annuler le dernier commit (perd les changements)
git revert <commit>               # Cr√©er un commit qui annule un commit pr√©c√©dent
```

### Autres

```bash
git stash                         # Mettre de c√¥t√© les modifications
git stash pop                     # R√©cup√©rer les modifications
git tag v1.0.0                    # Cr√©er un tag
git tag -a v1.0.0 -m "Version 1.0" # Tag avec annotation
```

## Tags et Releases

Les **tags** marquent des points sp√©cifiques dans l'historique, typiquement pour les versions.

### Cr√©er un tag

```bash
# Tag simple
git tag v1.0.0

# Tag avec message
git tag -a v1.0.0 -m "Version 1.0 - Premi√®re release stable"

# Voir les tags
git tag

# Voir les d√©tails d'un tag
git show v1.0.0
```

### Pousser les tags

```bash
# Pousser un tag sp√©cifique
git push origin v1.0.0

# Pousser tous les tags
git push --tags
```

### Convention de versioning

Utilisez le **Semantic Versioning** (SemVer) : `MAJOR.MINOR.PATCH`

- **MAJOR** : Changements incompatibles (breaking changes)
- **MINOR** : Nouvelles fonctionnalit√©s (compatibles)
- **PATCH** : Corrections de bugs

**Exemples :**
- `1.0.0` : Premi√®re version stable
- `1.1.0` : Ajout de fonctionnalit√©s
- `1.1.1` : Correction de bug
- `2.0.0` : Changements majeurs incompatibles

### Cr√©er une Release sur GitHub

1. Allez sur votre repository GitHub
2. Cliquez sur "Releases"
3. Cliquez sur "Create a new release"
4. Choisissez un tag (ou cr√©ez-en un)
5. Ajoutez des notes de release
6. Attachez des binaires compil√©s (optionnel)
7. Cliquez sur "Publish release"

**Exemple de notes de release :**

```markdown
## Version 1.2.0 - 2025-03-15

### Nouvelles fonctionnalit√©s
- Ajout du module de gestion des clients
- Export Excel des rapports
- Th√®me sombre

### Am√©liorations
- Performance de la grille am√©lior√©e de 40%
- Interface utilisateur modernis√©e

### Corrections
- Correction du bug d'affichage des dates
- Correction de la sauvegarde des pr√©f√©rences

### Notes techniques
- N√©cessite Delphi 13 ou sup√©rieur
- Compatible Windows 10/11
```

## Int√©gration de Git avec Delphi

### Version Control dans l'IDE Delphi

Delphi supporte l'int√©gration avec Git :

1. **Tools ‚Üí Options ‚Üí Version Control ‚Üí Git**
2. Configurez le chemin vers `git.exe`
3. Activez l'int√©gration

**Fonctionnalit√©s disponibles :**
- Voir l'√©tat des fichiers dans le Project Manager
- Commit depuis l'IDE
- Diff int√©gr√©
- Historique

### Workflow recommand√©

Bien que Delphi ait une int√©gration Git, beaucoup de d√©veloppeurs pr√©f√®rent :

1. **Utiliser l'IDE pour coder**
2. **Utiliser une GUI Git s√©par√©e** (GitKraken, SourceTree) pour le versionnement
3. **Ou utiliser la ligne de commande** dans un terminal s√©par√©

**Avantages :**
- Plus de contr√¥le
- Meilleure visualisation
- Moins de risque d'erreurs

### Fichiers Delphi et Git

**Fichiers √† versionner :**
- ‚úÖ `.dpr`, `.dproj` (fichiers projet)
- ‚úÖ `.pas`, `.dfm` (unit√©s et formulaires)
- ‚úÖ `.res` (ressources)
- ‚úÖ `.dpk` (packages)
- ‚úÖ `.groupproj` (groupe de projets)

**Fichiers √† ignorer :**
- ‚ùå `.dcu` (unit√©s compil√©es)
- ‚ùå `.exe`, `.dll` (ex√©cutables)
- ‚ùå `__history/` (historique local Delphi)
- ‚ùå `Win32/`, `Win64/` (dossiers de build)

### Gestion des fichiers binaires

Les `.dfm` peuvent √™tre stock√©s en texte ou binaire. Pour Git, pr√©f√©rez le texte.

**Dans Delphi :**
1. Tools ‚Üí Options ‚Üí Environment Options ‚Üí VCL Designer
2. Cochez "Text DFM"

**Ou via le Project Options :**
1. Project ‚Üí Options ‚Üí Form
2. Choisissez "Text" pour "Form file format"

**Avantage :** Les `.dfm` en texte peuvent √™tre diff√©s et merg√©s facilement.

### Ignorer les fichiers locaux

Certains fichiers sont sp√©cifiques √† votre machine :

```gitignore
# Configuration locale
*.local
*.identcache
*.dsk

# Chemins absolus dans les projets
*.stat
*.dsk
```

**Important :** Ne commitez jamais :
- Chemins absolus
- Mots de passe
- Configurations locales

## Bonnes pratiques

### 1. Commitez souvent

- ‚úÖ Petits commits fr√©quents
- ‚ùå Gros commits rares

**Pourquoi ?**
- Plus facile √† revoir
- Plus facile √† annuler si probl√®me
- Historique plus clair

### 2. Messages descriptifs

```bash
# Mauvais
git commit -m "fix"

# Bon
git commit -m "fix: Correction du calcul de TVA dans la facture"
```

### 3. Une fonctionnalit√© = Une branche

Ne m√©langez pas plusieurs fonctionnalit√©s dans une m√™me branche.

```bash
# Mauvais
git checkout -b tout-en-vrac
# ... ajout client + correction bug + refactoring ...

# Bon
git checkout -b feature/ajout-client
# ... seulement ajout client ...

git checkout -b fix/bug-grille
# ... seulement correction du bug ...
```

### 4. Synchronisez r√©guli√®rement

```bash
# Au moins une fois par jour
git pull
```

Cela √©vite les gros conflits difficiles √† r√©soudre.

### 5. Ne commitez pas de fichiers g√©n√©r√©s

Utilisez `.gitignore` d√®s le d√©but. Ne commitez que le code source.

### 6. Testez avant de pousser

```bash
# Compilez et testez avant de:
git push
```

Ne poussez pas de code qui ne compile pas.

### 7. Revue de code (Pull Requests)

Avant de fusionner dans `main`, faites relire votre code par un coll√®gue via une Pull Request.

**Avantages :**
- D√©tection d'erreurs
- Partage de connaissances
- Am√©lioration de la qualit√©

### 8. Prot√©gez la branche main

Sur GitHub, configurez des protections :

1. Settings ‚Üí Branches ‚Üí Branch protection rules
2. Cochez :
   - "Require pull request reviews before merging"
   - "Require status checks to pass before merging"
   - "Include administrators"

Cela emp√™che les pushs directs sur `main`.

### 9. Documentation

Maintenez un fichier `README.md` √† jour :

```markdown
# Mon Application Delphi

Description de l'application

## Installation

1. Cloner le repository
2. Ouvrir MonProjet.dpr dans Delphi
3. Compiler et ex√©cuter

## Configuration

Copiez `config.template.ini` en `config.ini` et configurez...

## Contribution

Voir [CONTRIBUTING.md](CONTRIBUTING.md)

## Licence

MIT
```

### 10. Utilisez des issues

Pour tracker les bugs et fonctionnalit√©s :

1. GitHub ‚Üí Issues ‚Üí New Issue
2. D√©crivez le probl√®me ou la fonctionnalit√©
3. Assignez √† quelqu'un
4. Liez les commits/PR √† l'issue

```bash
# Dans le message de commit
git commit -m "fix: Correction bug grille #42"
# Le #42 cr√©e un lien vers l'issue #42
```

## Situations courantes

### J'ai modifi√© des fichiers par erreur

```bash
# Annuler les modifications d'un fichier
git checkout -- MonFichier.pas

# Annuler toutes les modifications
git checkout -- .
```

### J'ai commit√© sur la mauvaise branche

```bash
# 1. Annuler le commit (garde les changements)
git reset --soft HEAD~1

# 2. Cr√©er/changer vers la bonne branche
git checkout -b bonne-branche

# 3. Recommiter
git commit -m "Message"
```

### J'ai commit√© un fichier sensible

```bash
# 1. Retirer le fichier de Git (garde le fichier local)
git rm --cached config.prod.ini

# 2. Ajouter au .gitignore
echo "config.prod.ini" >> .gitignore

# 3. Commiter
git add .gitignore
git commit -m "Suppression fichier sensible de Git"

# 4. Si d√©j√† pouss√©, nettoyer l'historique (complexe)
# Utilisez git filter-branch ou BFG Repo-Cleaner
```

### Je veux revenir √† une version ant√©rieure

```bash
# Voir l'historique
git log --oneline

# Revenir temporairement √† un commit
git checkout abc123

# Cr√©er une branche depuis ce point
git checkout -b retour-version-anterieure

# Ou annuler les commits r√©cents
git reset --hard abc123  # ATTENTION: Perte des changements
```

### Mon coll√®gue a pouss√©, j'ai des conflits

```bash
# 1. R√©cup√©rer les changements
git pull

# 2. Si conflits, Git vous le dit
# 3. Ouvrir les fichiers en conflit
# 4. R√©soudre manuellement
# 5. Marquer comme r√©solu
git add FichierResolu.pas

# 6. Finir le merge
git commit -m "R√©solution conflits"
```

### Je veux mettre de c√¥t√© mes modifications

```bash
# Mettre de c√¥t√© (stash)
git stash

# Travailler sur autre chose...

# R√©cup√©rer
git stash pop

# Voir la liste des stash
git stash list

# Appliquer un stash sp√©cifique
git stash apply stash@{0}
```

## Ressources et outils

### Apprendre Git

**Tutoriels interactifs :**
- https://learngitbranching.js.org/ - Apprendre Git visuellement
- https://try.github.io/ - Tutoriels GitHub

**Documentation :**
- https://git-scm.com/doc - Documentation officielle
- https://www.atlassian.com/git/tutorials - Tutoriels Atlassian

**Cheat sheets :**
- https://education.github.com/git-cheat-sheet-education.pdf

### Outils Git

**Clients GUI :**
- GitKraken (https://www.gitkraken.com/)
- SourceTree (https://www.sourcetreeapp.com/)
- GitHub Desktop (https://desktop.github.com/)
- TortoiseGit (https://tortoisegit.org/)

**Int√©grations IDE :**
- Git Extensions for Visual Studio/Delphi
- Plugin Git pour RAD Studio

**En ligne de commande :**
- Git Bash (inclus avec Git pour Windows)
- PowerShell avec posh-git

### Services d'h√©bergement

- **GitHub** (https://github.com) - Le plus populaire
- **GitLab** (https://gitlab.com) - Alternative compl√®te
- **Bitbucket** (https://bitbucket.org) - Par Atlassian
- **Azure DevOps** (https://dev.azure.com) - Par Microsoft
- **Gitea** (https://gitea.io) - Auto-h√©bergeable

## Exemple complet : Workflow d'une journ√©e

Voici un sc√©nario r√©aliste d'une journ√©e de travail :

### Matin : D√©marrage

```bash
# 1. R√©cup√©rer les derni√®res modifications
cd C:\Projets\MonAppli
git checkout main
git pull

# 2. Cr√©er une branche pour la fonctionnalit√© du jour
git checkout -b feature/ajout-export-excel

# 3. Travailler dans Delphi
# ... codage ...
```

### Milieu de journ√©e : Premier commit

```bash
# 4. V√©rifier ce qui a chang√©
git status
git diff

# 5. Commiter les changements
git add Source/ExportExcel.pas Source/ExportExcel.dfm
git commit -m "feat: Cr√©ation du module d'export Excel"
```

### Apr√®s-midi : Continuation

```bash
# 6. Continuer √† travailler
# ... plus de code ...

# 7. Autre commit
git add .
git commit -m "feat: Ajout formatage des cellules Excel"
```

### Fin de journ√©e : Synchronisation

```bash
# 8. Pousser votre travail
git push -u origin feature/ajout-export-excel

# 9. Cr√©er une Pull Request sur GitHub
# (Via l'interface web)

# 10. Revenir sur main pour le lendemain
git checkout main
```

### Lendemain : Fusion et suite

```bash
# 11. Pull Request approuv√©e et fusionn√©e (via GitHub)

# 12. Mettre √† jour votre repo local
git checkout main
git pull

# 13. Supprimer la branche locale
git branch -d feature/ajout-export-excel

# 14. Nouvelle fonctionnalit√©
git checkout -b feature/nouvelle-fonctionnalite
```

## Conclusion

Le versionnement avec Git est une comp√©tence essentielle pour tout d√©veloppeur moderne. Bien que la courbe d'apprentissage puisse sembler raide au d√©but, les b√©n√©fices sont immenses :

**Avantages principaux :**

1. **Historique complet** - Jamais de perte de code
2. **Collaboration efficace** - Travaillez en √©quipe sans friction
3. **Branches puissantes** - Exp√©rimentez sans risque
4. **Sauvegarde cloud** - Code s√©curis√© sur GitHub/GitLab
5. **Professionnel** - Standard de l'industrie

**Pour d√©buter :**

1. Installez Git et cr√©ez un compte GitHub
2. Cr√©ez un `.gitignore` adapt√© √† Delphi
3. Commencez avec les commandes de base : `add`, `commit`, `push`, `pull`
4. Utilisez une GUI si la ligne de commande vous intimide
5. Pratiquez sur vos projets personnels
6. Progressez vers les branches et la collaboration

**Commandes essentielles √† retenir :**

```bash
git init                    # Cr√©er un repo
git clone <url>            # Cloner un repo
git status                 # √âtat des fichiers
git add .                  # Ajouter tout
git commit -m "message"    # Commiter
git push                   # Pousser
git pull                   # R√©cup√©rer
git checkout -b <branche>  # Cr√©er une branche
git merge <branche>        # Fusionner
```

**N'ayez pas peur de faire des erreurs !** Git permet presque toujours de revenir en arri√®re. L'important est de commencer √† l'utiliser et d'apprendre progressivement.

Avec Git, vous ne perdrez plus jamais de code, et la collaboration avec d'autres d√©veloppeurs deviendra un plaisir plut√¥t qu'un cauchemar. C'est un investissement en temps qui rapporte tr√®s rapidement.

Dans la prochaine section, nous explorerons la documentation du code, un autre aspect crucial de la qualit√© logicielle.

‚è≠Ô∏è [Documentation du code](/18-architecture-et-bonnes-pratiques/06-documentation-du-code.md)
